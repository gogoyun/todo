import{d as u,e as y,p as w,c as i,q as S,a as s,t as r,g as a,F as v,f as F,x as $,i as k,j as p,o as l}from"./index-DoggXRkB.js";import{c as m,d as T,a as V,u as j,F as B}from"./index.esm-DYOA02oW.js";import{h as D}from"./axios-CUVJzsBh.js";const N="/todo/assets/add_pic-DLj440Tc.png",q={class:"flex flex-col justify-center content-center text-center"},A={class:"text-xl mt-2 mb-6"},C={class:"text-sm/6 text-primary pb-8"},L={class:"fieldset flex flex-col grow gap-7 mb-5"},E={class:"mt-2 mb-10"},I={type:"submit",class:"btn btn-md btn-wide bg-primary text-base-100 font-normal rounded-none h-[44px]"},M={key:0,class:"loading loading-spinner loading-xs"},R={class:"error-text mt-1 px-1 h-[18px]"},z=u({__name:"Add",setup(_){const{t:n}=y(),c=w(),f=m({titles:T().of(m({titles:V().nullable()})).test("must-one-title",n("validate.titleRequired"),o=>!o||o.length===0?!1:o.some(t=>t&&t.title&&t.title.trim()!==""))}),{handleSubmit:x,errors:b,resetForm:h,isSubmitting:g}=j({validationSchema:f}),d=x(async o=>{const t=o.titles.filter(e=>e&&e.title&&e.title.trim()!=="");await D(t).then(e=>{e.status==200&&(c.toastData={status:!0,type:"success",message:n("validate.success.add"),ms:3e3},h())})},o=>{console.log("errors",o)});return(o,t)=>(l(),i("form",{onSubmit:t[0]||(t[0]=S((...e)=>a(d)&&a(d)(...e),["prevent"]))},[s("div",q,[s("h1",A,r(a(n)("add.title")),1),t[1]||(t[1]=s("img",{src:N,class:"inline-block mx-auto my-6",alt:"welcome back!"},null,-1)),s("p",C,r(a(n)("add.subtitle")),1),s("fieldset",L,[(l(),i(v,null,F(3,e=>s("div",null,[p(a(B),{type:"text",class:"input w-full h-[47px] border-0 rounded-[11px]",name:`titles[${e-1}].title`},null,8,["name"])])),64))]),s("div",E,[s("button",I,[$(r(a(n)("add.submitButton"))+" ",1),a(g)?(l(),i("span",M)):k("",!0)]),s("div",R,r(a(b).titles),1)])])],32))}}),G={class:"flex flex-1 flex-col justify-between content-center p-6"},O=u({__name:"AddView",setup(_){return(n,c)=>(l(),i("main",G,[p(z)]))}});export{O as default};
