import{_ as $,c,a as e,o as p,d as y,e as R,p as S,x as B,m as M,b as P,q as T,j as g,t as n,g as o,h as _,v as h,s as v}from"./index-Cj6Czk0x.js";import{c as D,a as b,b as F,u as z}from"./index.esm-CdY2wj7a.js";import{f as H}from"./axios-CrJsOTRe.js";const I={},N={version:"1.1",id:"_x31_0",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{width:"48px",height:"48px",opacity:"1"},"xml:space":"preserve"};function U(u,s){return p(),c("svg",N,s[0]||(s[0]=[e("g",null,[e("path",{class:"st0",d:`M186.553,180.863h-0.699v-37.82c0-47.622,31.457-86.398,70.148-86.398c30.282,0,56.16,23.746,65.965,56.902
			h49.039l8.969,0.027c0-0.008-0.004-0.016-0.008-0.027h0.168C368.022,48.801,316.956,0,256.002,0
			c-69.934,0-126.793,64.18-126.793,143.043v37.82H43.928h-0.262h-0.16v328.961v2.016V512h424.988V180.863H186.553z M270.791,336.313
			c0.973,2.086,1.555,4.39,1.555,6.832v41.39c0,8.988-7.352,16.34-16.34,16.34c-8.984,0-16.336-7.352-16.336-16.34v-41.39
			c0-2.442,0.582-4.746,1.554-6.832c-10.609-5.398-17.894-16.395-17.894-29.114c0-18.047,14.629-32.68,32.676-32.68
			c18.05,0,32.68,14.633,32.68,32.68C288.686,319.918,281.404,330.914,270.791,336.313z`,style:{fill:"rgb(85, 132, 122)"}})],-1)]))}const j=$(I,[["render",U]]),E={class:"flex flex-col"},L={class:"inline-block mx-auto"},O={class:"text-xl text-center mt-12 mb-6"},A={class:"fieldset flex flex-col mt-3 mb-5"},G=["placeholder"],J={class:"error-text mt-1 px-1 h-[18px]"},K=["placeholder"],Q={class:"error-text mt-1 px-1 h-[18px]"},W={class:"bottom text-center"},X={type:"submit",class:"btn btn-md btn-wide bg-primary text-base-100 font-normal rounded-none h-[44px] mb-14"},Y=y({__name:"ResetPassword",setup(u){const{t:s}=R(),i=M(),m=B(),C=S(),k=m.query.token,V=D({password:b().required(s("validate.password.required")).min(6,s("validate.password.min")).max(8,s("validate.password.max")),passwordConfirm:b().oneOf([F("password")],s("validate.passwordConfirm.error")).required(s("validate.passwordConfirm.required"))}),{handleSubmit:q,errors:w,defineField:f}=z({validationSchema:V,initialValues:{password:"",passwordConfirm:""}}),[l]=f("password"),[d]=f("passwordConfirm"),x=q(async a=>{await H({token:k,new_password:a.password}).then(async t=>{(t==null?void 0:t.data.code)===200&&i.replace("/reset-success")}).catch(t=>{t.status&&(C.toastData={status:!0,type:"error",message:s("validate.error.apiFaild"),ms:3e3})})},a=>{console.log("errors",a)});return P(()=>{m.query.token||i.replace("/404")}),(a,t)=>(p(),c("form",{onSubmit:t[2]||(t[2]=T((...r)=>o(x)&&o(x)(...r),["prevent"])),class:"w-full"},[e("div",E,[e("div",L,[g(j)]),e("h1",O,n(o(s)("reset.title")),1),e("fieldset",A,[e("div",null,[_(e("input",{type:"password",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:o(s)("reset.passwordPlaceholder"),"onUpdate:modelValue":t[0]||(t[0]=r=>v(l)?l.value=r:null),name:"password"},null,8,G),[[h,o(l)]]),e("div",J,n(o(w).password),1)]),e("div",null,[_(e("input",{type:"password",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:o(s)("reset.confirmPasswordPlaceholder"),"onUpdate:modelValue":t[1]||(t[1]=r=>v(d)?d.value=r:null),name:"passwordConfirm"},null,8,K),[[h,o(d)]]),e("div",Q,n(o(w).passwordConfirm),1)])])]),e("div",W,[e("button",X,n(o(s)("reset.submitButton")),1)])],32))}}),Z={class:"flex-1 flex items-center p-6"},os=y({__name:"ResetPasswordView",setup(u){return(s,i)=>(p(),c("main",Z,[g(Y)]))}});export{os as default};
