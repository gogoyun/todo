import{d as b,e as D,p as V,k as $,m as q,c as w,q as B,a as s,t as n,g as a,h as f,v as x,s as h,o as v,j as P}from"./index-DVbn_umt.js";import{c as U,a as g,u as j}from"./index.esm-VE0mIQnb.js";import{c as C}from"./axios-a-7qDyb-.js";const F="/todo/assets/login_pic-DKEhcBkA.png",L={class:"flex flex-col justify-center content-center"},T={class:"text-xl text-center mt-12 mb-6"},A=["alt"],E={class:"fieldset flex flex-col mt-3 mb-5"},I=["placeholder"],M={class:"error-text mt-1 px-1 h-[18px]"},N=["placeholder"],R={class:"error-text mt-1 px-1 h-[18px]"},K={class:"bottom text-center"},z={type:"submit",class:"btn btn-md btn-wide bg-primary text-base-100 font-normal rounded-none h-[44px] mb-14"},G={class:"flex justify-center items-center text-[15px]"},H={class:"opacity-62"},J=b({__name:"Signin",setup(y){const{t}=D(),r=q(),l=V(),d=$(),k=U({email:g().email(t("validate.email.error")).required(t("validate.email.required")),password:g().required(t("validate.password.required")).min(6,t("validate.password.min")).max(8,t("validate.password.max"))}),{handleSubmit:S,errors:m,defineField:u}=j({validationSchema:k,initialValues:{email:"",password:""}}),[c]=u("email"),[p]=u("password"),_=S(async i=>{await C({email:i.email,password:i.password}).then(e=>{(e==null?void 0:e.data.code)===200&&(d.userData={email:i.email,name:e.data.data.name,token:e.data.data.access_token},l.toastData={status:!0,type:"success",message:t("validate.success.signin"),ms:3e3},d.preLoginPath?r.replace(d.preLoginPath):r.replace("/"))}).catch(e=>{switch(e.status){case 400:l.toastData={status:!0,type:"warning",message:t("validate.error.signin"),ms:3e3};break;default:l.toastData={status:!0,type:"error",message:t("validate.error.apiFaild"),ms:3e3}}})},i=>{console.log("errors",i)});return(i,e)=>(v(),w("form",{onSubmit:e[4]||(e[4]=B((...o)=>a(_)&&a(_)(...o),["prevent"]))},[s("div",L,[s("h1",T,n(a(t)("signin.welcome")),1),s("img",{src:F,class:"inline-block mx-auto",alt:a(t)("signin.welcome")},null,8,A),s("fieldset",E,[s("div",null,[f(s("input",{type:"email",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:a(t)("signin.emailPlaceholder"),"onUpdate:modelValue":e[0]||(e[0]=o=>h(c)?c.value=o:null),name:"email"},null,8,I),[[x,a(c)]]),s("div",M,n(a(m).email),1)]),s("div",null,[f(s("input",{type:"password",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:a(t)("signin.passwordPlaceholder"),"onUpdate:modelValue":e[1]||(e[1]=o=>h(p)?p.value=o:null),name:"password"},null,8,N),[[x,a(p)]]),s("div",R,n(a(m).password),1)])]),s("button",{type:"button",class:"btn btn-link font-normal",onClick:e[2]||(e[2]=o=>a(r).push("/forgotpassword"))},n(a(t)("signin.forgotPassword")),1)]),s("div",K,[s("button",z,n(a(t)("signin.submitButton")),1),s("div",G,[s("p",H,n(a(t)("signin.haventAccount")),1),s("button",{class:"btn btn-link opacity-100",onClick:e[3]||(e[3]=o=>a(r).push("/signup"))},n(a(t)("signin.signUp")),1)])])],32))}}),O={class:"flex flex-1 flex-col justify-between content-center p-6"},Y=b({__name:"SignInView",setup(y){return(t,r)=>(v(),w("main",O,[P(J)]))}});export{Y as default};
