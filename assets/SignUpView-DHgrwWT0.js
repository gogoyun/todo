import{d as y,e as D,p as U,k as N,m as P,c as w,q as $,a as s,t as r,g as t,h as c,v as p,s as m,x as j,i as B,o as g,j as R}from"./index-DoggXRkB.js";import{c as T,a as u,b as E,u as F}from"./index.esm-DYOA02oW.js";import{b as I,c as M}from"./axios-CUVJzsBh.js";const A={class:"flex flex-col justify-center content-center"},L={class:"text-xl text-center mt-12 mb-6"},O={class:"text-sm/6 text-primary text-center pb-12"},z={class:"fieldset flex flex-col mt-3 mb-5"},G=["placeholder"],H={class:"error-text mt-1 px-1 h-[18px]"},J=["placeholder"],K={class:"error-text mt-1 px-1 h-[18px]"},Q=["placeholder"],W={class:"error-text mt-1 px-1 h-[18px]"},X=["placeholder"],Y={class:"error-text mt-1 px-1 h-[18px]"},Z={class:"bottom text-center"},ee={type:"submit",class:"btn btn-md btn-wide bg-primary text-base-100 font-normal rounded-none h-[44px] mb-14"},se={key:0,class:"loading loading-spinner loading-xs"},te={class:"flex justify-center items-center text-[15px]"},ae={class:"opacity-62"},oe={type:"button",class:"btn btn-link opacity-100"},ne=y({__name:"Signup",setup(k){const{t:e}=D(),b=P(),i=U(),C=N(),S=T({nickname:u().required(e("validate.name.required")),email:u().email(e("validate.email.error")).required(e("validate.email.required")),password:u().required(e("validate.password.required")).min(6,e("validate.password.min")).max(8,e("validate.password.max")),passwordConfirm:u().oneOf([E("password")],e("validate.passwordConfirm.error")).required(e("validate.passwordConfirm.required"))}),{handleSubmit:V,errors:l,defineField:d,isSubmitting:q}=F({validationSchema:S,initialValues:{nickname:"",email:"",password:"",passwordConfirm:""}}),[x]=d("nickname"),[f]=d("email"),[_]=d("password"),[h]=d("passwordConfirm"),v=V(async n=>{await I({email:n.email,password:n.password,name:n.nickname}).then(async a=>{if(console.log("res",a),(a==null?void 0:a.data.code)===200)try{const o=await M({email:n.email,password:n.password});C.userData={email:n.email,name:n.nickname,token:o.data.data.access_token},i.toastData={status:!0,type:"success",message:e("validate.success.signup"),ms:3e3},b.replace("/")}catch(o){console.log("login error",o),i.toastData={status:!0,type:"error",message:e("validate.login.error"),ms:3e3}}}).catch(a=>{switch(a.status){case 400:i.toastData={status:!0,type:"warning",message:e("validate.email.already"),ms:3e3};break;default:i.toastData={status:!0,type:"error",message:e("validate.email.error"),ms:3e3}}})},n=>{console.log("errors",n)});return(n,a)=>(g(),w("form",{onSubmit:a[4]||(a[4]=$((...o)=>t(v)&&t(v)(...o),["prevent"])),class:"flex flex-1 flex-col justify-between content-center"},[s("div",A,[s("h1",L,r(t(e)("signup.welcome")),1),s("p",O,r(t(e)("signup.subtitle")),1),s("fieldset",z,[s("div",null,[c(s("input",{type:"text",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:t(e)("signup.fullNamePlaceholder"),"onUpdate:modelValue":a[0]||(a[0]=o=>m(x)?x.value=o:null),name:"nickname"},null,8,G),[[p,t(x)]]),s("div",H,r(t(l).nickname),1)]),s("div",null,[c(s("input",{type:"email",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:t(e)("signup.emailPlaceholder"),"onUpdate:modelValue":a[1]||(a[1]=o=>m(f)?f.value=o:null),name:"email"},null,8,J),[[p,t(f)]]),s("div",K,r(t(l).email),1)]),s("div",null,[c(s("input",{type:"password",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:t(e)("signup.passwordPlaceholder"),"onUpdate:modelValue":a[2]||(a[2]=o=>m(_)?_.value=o:null),name:"password"},null,8,Q),[[p,t(_)]]),s("div",W,r(t(l).password),1)]),s("div",null,[c(s("input",{type:"password",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:t(e)("signup.confirmPasswordPlaceholder"),"onUpdate:modelValue":a[3]||(a[3]=o=>m(h)?h.value=o:null),name:"passwordConfirm"},null,8,X),[[p,t(h)]]),s("div",Y,r(t(l).passwordConfirm),1)])])]),s("div",Z,[s("button",ee,[j(r(t(e)("signup.submitButton"))+" ",1),t(q)?(g(),w("span",se)):B("",!0)]),s("div",te,[s("p",ae,r(t(e)("signup.haveAccount")),1),s("button",oe,r(t(e)("signup.signIn")),1)])])],32))}}),re={class:"flex flex-1 p-6"},ce=y({__name:"SignUpView",setup(k){return(e,b)=>(g(),w("main",re,[R(ne)]))}});export{ce as default};
