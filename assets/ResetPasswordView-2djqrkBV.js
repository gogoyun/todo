import{_ as $,c as i,a as e,o as d,d as g,e as R,p as B,y as M,m as P,b as T,q as N,j as y,t as n,g as o,h as f,v as h,s as v,x as D,i as F}from"./index-DoggXRkB.js";import{c as z,a as b,b as H,u as I}from"./index.esm-DYOA02oW.js";import{f as U}from"./axios-CUVJzsBh.js";const j={},E={version:"1.1",id:"_x31_0",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{width:"48px",height:"48px",opacity:"1"},"xml:space":"preserve"};function L(m,s){return d(),i("svg",E,s[0]||(s[0]=[e("g",null,[e("path",{class:"st0",d:`M186.553,180.863h-0.699v-37.82c0-47.622,31.457-86.398,70.148-86.398c30.282,0,56.16,23.746,65.965,56.902
			h49.039l8.969,0.027c0-0.008-0.004-0.016-0.008-0.027h0.168C368.022,48.801,316.956,0,256.002,0
			c-69.934,0-126.793,64.18-126.793,143.043v37.82H43.928h-0.262h-0.16v328.961v2.016V512h424.988V180.863H186.553z M270.791,336.313
			c0.973,2.086,1.555,4.39,1.555,6.832v41.39c0,8.988-7.352,16.34-16.34,16.34c-8.984,0-16.336-7.352-16.336-16.34v-41.39
			c0-2.442,0.582-4.746,1.554-6.832c-10.609-5.398-17.894-16.395-17.894-29.114c0-18.047,14.629-32.68,32.676-32.68
			c18.05,0,32.68,14.633,32.68,32.68C288.686,319.918,281.404,330.914,270.791,336.313z`,style:{fill:"rgb(85, 132, 122)"}})],-1)]))}const O=$(j,[["render",L]]),A={class:"flex flex-col"},G={class:"inline-block mx-auto"},J={class:"text-xl text-center mt-12 mb-6"},K={class:"fieldset flex flex-col mt-3 mb-5"},Q=["placeholder"],W={class:"error-text mt-1 px-1 h-[18px]"},X=["placeholder"],Y={class:"error-text mt-1 px-1 h-[18px]"},Z={class:"bottom text-center"},ss={type:"submit",class:"btn btn-md btn-wide bg-primary text-base-100 font-normal rounded-none h-[44px] mb-14"},es={key:0,class:"loading loading-spinner loading-xs"},ts=g({__name:"ResetPassword",setup(m){const{t:s}=R(),l=P(),u=M(),C=B(),k=u.query.token,V=z({password:b().required(s("validate.password.required")).min(6,s("validate.password.min")).max(8,s("validate.password.max")),passwordConfirm:b().oneOf([H("password")],s("validate.passwordConfirm.error")).required(s("validate.passwordConfirm.required"))}),{handleSubmit:q,errors:x,defineField:_,isSubmitting:S}=I({validationSchema:V,initialValues:{password:"",passwordConfirm:""}}),[c]=_("password"),[p]=_("passwordConfirm"),w=q(async r=>{await U({token:k,new_password:r.password}).then(async t=>{(t==null?void 0:t.data.code)===200&&l.replace("/reset-success")}).catch(t=>{t.status&&(C.toastData={status:!0,type:"error",message:s("validate.error.apiFaild"),ms:3e3})})},r=>{console.log("errors",r)});return T(()=>{u.query.token||l.replace("/404")}),(r,t)=>(d(),i("form",{onSubmit:t[2]||(t[2]=N((...a)=>o(w)&&o(w)(...a),["prevent"])),class:"w-full"},[e("div",A,[e("div",G,[y(O)]),e("h1",J,n(o(s)("reset.title")),1),e("fieldset",K,[e("div",null,[f(e("input",{type:"password",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:o(s)("reset.passwordPlaceholder"),"onUpdate:modelValue":t[0]||(t[0]=a=>v(c)?c.value=a:null),name:"password"},null,8,Q),[[h,o(c)]]),e("div",W,n(o(x).password),1)]),e("div",null,[f(e("input",{type:"password",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:o(s)("reset.confirmPasswordPlaceholder"),"onUpdate:modelValue":t[1]||(t[1]=a=>v(p)?p.value=a:null),name:"passwordConfirm"},null,8,X),[[h,o(p)]]),e("div",Y,n(o(x).passwordConfirm),1)])])]),e("div",Z,[e("button",ss,[D(n(o(s)("reset.submitButton"))+" ",1),o(S)?(d(),i("span",es)):F("",!0)])])],32))}}),os={class:"flex-1 flex items-center p-6"},is=g({__name:"ResetPasswordView",setup(m){return(s,l)=>(d(),i("main",os,[y(ts)]))}});export{is as default};
