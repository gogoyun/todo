import{d as y,e as D,p as $,k as q,m as B,c as m,q as P,a,t as n,g as t,h,v as b,s as w,x as U,i as j,o as u,j as C}from"./index-DoggXRkB.js";import{c as N,a as v,u as T}from"./index.esm-DYOA02oW.js";import{c as F}from"./axios-CUVJzsBh.js";const L="/todo/assets/login_pic-DKEhcBkA.png",A={class:"flex flex-col justify-center content-center"},E={class:"text-xl text-center mt-12 mb-6"},I=["alt"],M={class:"fieldset flex flex-col mt-3 mb-5"},R=["placeholder"],K={class:"error-text mt-1 px-1 h-[18px]"},z=["placeholder"],G={class:"error-text mt-1 px-1 h-[18px]"},H={class:"bottom text-center"},J=["disabled"],O={key:0,class:"loading loading-spinner loading-xs"},Q={class:"flex justify-center items-center text-[15px]"},W={class:"opacity-62"},X=y({__name:"Signin",setup(k){const{t:s}=D(),l=B(),r=$(),d=q(),S=N({email:v().email(s("validate.email.error")).required(s("validate.email.required")),password:v().required(s("validate.password.required")).min(6,s("validate.password.min")).max(8,s("validate.password.max"))}),{handleSubmit:V,errors:_,defineField:x,isSubmitting:f}=T({validationSchema:S,initialValues:{email:"",password:""}}),[c]=x("email"),[p]=x("password"),g=V(async i=>{await F({email:i.email,password:i.password}).then(e=>{(e==null?void 0:e.data.code)===200&&(d.userData={email:i.email,name:e.data.data.name,token:e.data.data.access_token},r.toastData={status:!0,type:"success",message:s("validate.success.signin"),ms:3e3},d.preLoginPath?l.replace(d.preLoginPath):l.replace("/"))}).catch(e=>{switch(e.status){case 400:r.toastData={status:!0,type:"warning",message:s("validate.error.signin"),ms:3e3};break;default:r.toastData={status:!0,type:"error",message:s("validate.error.apiFaild"),ms:3e3}}})},i=>{console.log("errors",i)});return(i,e)=>(u(),m("form",{onSubmit:e[4]||(e[4]=P((...o)=>t(g)&&t(g)(...o),["prevent"]))},[a("div",A,[a("h1",E,n(t(s)("signin.welcome")),1),a("img",{src:L,class:"inline-block mx-auto",alt:t(s)("signin.welcome")},null,8,I),a("fieldset",M,[a("div",null,[h(a("input",{type:"email",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:t(s)("signin.emailPlaceholder"),"onUpdate:modelValue":e[0]||(e[0]=o=>w(c)?c.value=o:null),name:"email"},null,8,R),[[b,t(c)]]),a("div",K,n(t(_).email),1)]),a("div",null,[h(a("input",{type:"password",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:t(s)("signin.passwordPlaceholder"),"onUpdate:modelValue":e[1]||(e[1]=o=>w(p)?p.value=o:null),name:"password"},null,8,z),[[b,t(p)]]),a("div",G,n(t(_).password),1)])]),a("button",{type:"button",class:"btn btn-link font-normal",onClick:e[2]||(e[2]=o=>t(l).push("/forgotpassword"))},n(t(s)("signin.forgotPassword")),1)]),a("div",H,[a("button",{type:"submit",disabled:t(f),class:"btn btn-md btn-wide bg-primary text-base-100 font-normal rounded-none h-[44px] mb-14"},[U(n(t(s)("signin.submitButton"))+" ",1),t(f)?(u(),m("span",O)):j("",!0)],8,J),a("div",Q,[a("p",W,n(t(s)("signin.haventAccount")),1),a("button",{type:"button",class:"btn btn-link opacity-100",onClick:e[3]||(e[3]=o=>t(l).push("/signup"))},n(t(s)("signin.signUp")),1)])])],32))}}),Y={class:"flex flex-1 flex-col justify-between content-center p-6"},se=y({__name:"SignInView",setup(k){return(s,l)=>(u(),m("main",Y,[C(X)]))}});export{se as default};
