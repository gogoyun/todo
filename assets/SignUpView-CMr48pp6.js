import{d as b,e as V,p as D,k as U,m as P,c as v,q as $,a as s,t as n,g as t,h as c,v as p,s as m,o as y,j}from"./index-B8NkFvV2.js";import{c as B,a as u,b as R,u as N}from"./index.esm-Ct-gZwLP.js";import{b as T,c as E}from"./axios-D1FkswKm.js";const F={class:"flex flex-col justify-center content-center"},I={class:"text-xl text-center mt-12 mb-6"},M={class:"text-sm/6 text-primary text-center pb-12"},A={class:"fieldset flex flex-col mt-3 mb-5"},L=["placeholder"],O={class:"error-text mt-1 px-1 h-[18px]"},z=["placeholder"],G={class:"error-text mt-1 px-1 h-[18px]"},H=["placeholder"],J={class:"error-text mt-1 px-1 h-[18px]"},K=["placeholder"],Q={class:"error-text mt-1 px-1 h-[18px]"},W={class:"bottom text-center"},X={type:"submit",class:"btn btn-md btn-wide bg-primary text-base-100 font-normal rounded-none h-[44px] mb-14"},Y={class:"flex justify-center items-center text-[15px]"},Z={class:"opacity-62"},ee={type:"button",class:"btn btn-link opacity-100"},se=b({__name:"Signup",setup(k){const{t:e}=V(),w=P(),i=D(),q=U(),C=B({nickname:u().required(e("validate.name.required")),email:u().email(e("validate.email.error")).required(e("validate.email.required")),password:u().required(e("validate.password.required")).min(6,e("validate.password.min")).max(8,e("validate.password.max")),passwordConfirm:u().oneOf([R("password")],e("validate.passwordConfirm.error")).required(e("validate.passwordConfirm.required"))}),{handleSubmit:S,errors:l,defineField:d}=N({validationSchema:C,initialValues:{nickname:"",email:"",password:"",passwordConfirm:""}}),[x]=d("nickname"),[f]=d("email"),[h]=d("password"),[_]=d("passwordConfirm"),g=S(async r=>{await T({email:r.email,password:r.password,name:r.nickname}).then(async a=>{if(console.log("res",a),(a==null?void 0:a.data.code)===200)try{const o=await E({email:r.email,password:r.password});q.userData={email:r.email,name:r.nickname,token:o.data.data.access_token},i.toastData={status:!0,type:"success",message:e("validate.success.signup"),ms:3e3},w.replace("/")}catch(o){console.log("login error",o),i.toastData={status:!0,type:"error",message:e("validate.login.error"),ms:3e3}}}).catch(a=>{switch(a.status){case 400:i.toastData={status:!0,type:"warning",message:e("validate.email.already"),ms:3e3};break;default:i.toastData={status:!0,type:"error",message:e("validate.email.error"),ms:3e3}}})},r=>{console.log("errors",r)});return(r,a)=>(y(),v("form",{onSubmit:a[4]||(a[4]=$((...o)=>t(g)&&t(g)(...o),["prevent"])),class:"flex flex-1 flex-col justify-between content-center"},[s("div",F,[s("h1",I,n(t(e)("signup.welcome")),1),s("p",M,n(t(e)("signup.subtitle")),1),s("fieldset",A,[s("div",null,[c(s("input",{type:"text",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:t(e)("signup.fullNamePlaceholder"),"onUpdate:modelValue":a[0]||(a[0]=o=>m(x)?x.value=o:null),name:"nickname"},null,8,L),[[p,t(x)]]),s("div",O,n(t(l).nickname),1)]),s("div",null,[c(s("input",{type:"email",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:t(e)("signup.emailPlaceholder"),"onUpdate:modelValue":a[1]||(a[1]=o=>m(f)?f.value=o:null),name:"email"},null,8,z),[[p,t(f)]]),s("div",G,n(t(l).email),1)]),s("div",null,[c(s("input",{type:"password",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:t(e)("signup.passwordPlaceholder"),"onUpdate:modelValue":a[2]||(a[2]=o=>m(h)?h.value=o:null),name:"password"},null,8,H),[[p,t(h)]]),s("div",J,n(t(l).password),1)]),s("div",null,[c(s("input",{type:"password",class:"input w-full h-[47px] border-0 rounded-[11px]",placeholder:t(e)("signup.confirmPasswordPlaceholder"),"onUpdate:modelValue":a[3]||(a[3]=o=>m(_)?_.value=o:null),name:"passwordConfirm"},null,8,K),[[p,t(_)]]),s("div",Q,n(t(l).passwordConfirm),1)])])]),s("div",W,[s("button",X,n(t(e)("signup.submitButton")),1),s("div",Y,[s("p",Z,n(t(e)("signup.haveAccount")),1),s("button",ee,n(t(e)("signup.signIn")),1)])])],32))}}),te={class:"flex flex-1 p-6"},ne=b({__name:"SignUpView",setup(k){return(e,w)=>(y(),v("main",te,[j(se)]))}});export{ne as default};
